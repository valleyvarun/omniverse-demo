<!DOCTYPE html>
<html lang="en">
<!-- ============================================================================
     OMNIVERSE DEMO APPLICATION - HTML STRUCTURE
     ============================================================================
     
     CONTENTS:
     1. Document Head
     2. Top Black Bar
     3. Main Header Bar
     4. Navigation Menu Bar
     5. Main Layout Container
     6. Workspace Container
     7. Function Display Header
     8. Command Line Interface
     9. Main Content Area
     10. Footer Bar
     11. JavaScript Inclusion
     
     ============================================================================ -->

<head>
    <!-- ===========================================================================
         1. DOCUMENT HEAD
         =========================================================================== -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Omniverse Demo</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- ===========================================================================
         2. TOP BLACK BAR
         =========================================================================== -->
    <div class="black">
        <!-- Empty div - styling handled in CSS -->
    </div>

    <!-- ===========================================================================
         3. MAIN HEADER BAR
         =========================================================================== -->
    <header>
        <!-- LEFT SECTION: Logo and Application Name -->
        <div class="header-left">
            <img src="logo/omniverse-logo.png" alt="Omniverse Logo" class="logo">
            <h1 class="brand-text">omniverse</h1>
        </div>
        
        <!-- CENTER SECTION: User Account Management -->
        <div class="user-account">
            <!-- User profile icon -->
            <img src="logo/user-icon1.png" alt="User Icon" class="user-icon">
            
            <!-- Account dropdown container -->
            <div class="account-dropdown">
                <!-- Clickable selector showing current user -->
                <div class="account-selector" onclick="toggleDropdown()">
                    <span class="selected-email">valleyvarun@gmail.com</span>
                    <span class="dropdown-arrow">â–¼</span>
                </div>
                
                <!-- Hidden dropdown menu (shown/hidden via JavaScript) -->
                <div class="dropdown-menu" id="accountDropdown">
                    <!-- Available user accounts -->
                    <div class="dropdown-item account-item">valleyvarun@gmail.com</div>
                    <div class="dropdown-item account-item">vas2154@columbia.edu</div>
                    <div class="dropdown-item account-item">2020barc020@spab.ac.in</div>
                    
                    <!-- Visual separator -->
                    <div class="dropdown-divider"></div>
                    
                    <!-- Account management actions -->
                    <div class="dropdown-item action-item">Add Account</div>
                    <div class="dropdown-item action-item">Log Out of Account</div>
                </div>
            </div>
        </div>
        
        <!-- RIGHT SECTION: Window Control Buttons -->
        <div class="window-controls">
            <!-- Minimize button -->
            <button class="control-btn minimize-btn" title="Minimize">
                <span>âˆ’</span>
            </button>
            
            <!-- Maximize/Restore button -->
            <button class="control-btn maximize-btn" title="Restore Down">
                <span>â–¡</span>
            </button>
            
            <!-- Close button -->
            <button class="control-btn close-btn" title="Close">
                <span>Ã—</span>
            </button>
        </div>
    </header>
    
    <!-- ===========================================================================
         4. NAVIGATION MENU BAR
         =========================================================================== -->
    <nav class="menu-bar">
        <ul class="menu-list">
            <li><a href="#" class="menu-item">Home</a></li>
            <li><a href="#" class="menu-item">File</a></li>
            <li><a href="#" class="menu-item">Apps</a></li>
            <li class="menu-item-with-dropdown">
                <a href="#" class="menu-item" onclick="toggleWindowDropdown()">Window</a>
                <div class="window-dropdown" id="windowDropdown">
                    <div class="window-dropdown-item" onclick="showHistory()">Command Line History</div>
                </div>
            </li>
            <li><a href="#" class="menu-item">Settings</a></li>
            <li><a href="#" class="menu-item">Learn</a></li>
            <li><a href="#" class="menu-item">Help</a></li>
        </ul>
    </nav>

    <!-- ===========================================================================
         5. MAIN LAYOUT CONTAINER
         =========================================================================== -->
    <div class="main-layout">
        <!-- ===========================================================================
             6. WORKSPACE CONTAINER
             =========================================================================== -->
        <div class="workspace-container">
        <!-- ===========================================================================
             7. FUNCTION DISPLAY HEADER
             =========================================================================== -->
        <div class="function-display">
            <button class="history-toggle-btn" id="historyToggleBtn" onclick="toggleHistorySize()" title="Expand/Collapse History">
                <span>â–¼</span>
            </button>
            <button class="history-collapse-btn" id="historyCollapseBtn" onclick="collapseHistory()" title="Hide History">
                <span>âˆ’</span>
            </button>
            <div class="function-bubbles" id="functionBubbles">
                <!-- Function bubbles are dynamically added here by JavaScript -->
                <!-- Example: <div class="function-bubble">someFunction()</div> -->
            </div>
        </div>

        <!-- ===========================================================================
             8. COMMAND LINE INTERFACE
             =========================================================================== -->
        <div class="command-line-container">
            <!-- Show history button (appears when history is collapsed) -->
            <button class="show-history-btn" id="showHistoryBtn" onclick="showHistory()" title="Show History" style="display: none;">
                <span>â–¼</span>
            </button>
            
            <!-- Command label -->
            <span class="command-label">Command:</span>
            
            <!-- Command input field -->
            <input type="text" 
                   class="command-input" 
                   id="commandInput" 
                   placeholder="Type your command..." 
                   autocomplete="off">
        </div>

        <!-- ===========================================================================
             9. MAIN CONTENT AREA
             =========================================================================== -->
        <main class="main-content">
            <!-- Left Sidebar: Project Manager -->
            <aside class="project-manager-container" aria-label="Project Manager">
                <iframe 
                    id="pmFrame"
                    src="pm/pm.html"
                    title="Project Manager"
                    frameborder="0"
                    style="width: 100%; height: 100%; display: block; background: transparent;"
                ></iframe>
            </aside>

            <!-- Vertical resize handle for Project Manager sidebar -->
            <div class="project-resize-handle" id="projectResizeHandle" role="separator" aria-orientation="vertical" aria-label="Resize Project Manager">
                <button class="reopen-btn reopen-left" id="reopenExplorerBtn" title="Open Explorer" aria-label="Open Explorer" style="display:none">
                    <svg viewBox="0 0 20 20" width="12" height="12" aria-hidden="true" focusable="false">
                        <path d="M6 4 L14 10 L6 16" fill="none" stroke="#ccc" stroke-width="2" stroke-linecap="butt" stroke-linejoin="miter"/>
                    </svg>
                </button>
            </div>

            <!-- Right Content Pane -->
            <section class="content-pane">
                <!-- Tabs Header -->
                <div class="content-tabs-header">
                    <button class="tabs-nav-btn tabs-nav-left" aria-label="Scroll left" title="Scroll left" style="display:none">&#8249;</button>
                    <div class="content-tabs-scroll">
                        <div class="content-tabs-list">
                            <!-- Home Tab (Default) -->
                            <div class="content-tab active home-tab">
                                <div class="tab-text">Home</div>
                            </div>
                        </div>
                    </div>
                    <button class="tabs-nav-btn tabs-nav-right" aria-label="Scroll right" title="Scroll right" style="display:none">&#8250;</button>
                </div>
                
                <!-- Iframe for loading external HTML content -->
                <iframe id="contentFrame" 
                        src="pages/home.html" 
                        title="Main Content"
                        frameborder="0"
                        scrolling="no">
                    <!-- Fallback content for browsers that don't support iframe -->
                    <p>Your browser does not support iframes. Please upgrade to a modern browser.</p>
                </iframe>

                <!-- Centered modal overlay that sits above the content iframe -->
                <div id="contentModalOverlay" class="content-modal-overlay" aria-hidden="true">
                    <div class="content-modal" role="dialog" aria-modal="true" aria-label="Content Modal">
                        <iframe id="popupFrame" src="pages/popup.html" title="Popup" frameborder="0" style="width:100%;height:100%;display:block;background:transparent;border:none;"></iframe>
                    </div>
                </div>

                <!-- Apps loading modal overlay -->
                <div id="appsLoadingOverlay" class="apps-loading-overlay" aria-hidden="true">
                    <div class="apps-loading-modal" role="dialog" aria-modal="true" aria-label="App Loading Modal">
                        <div class="apps-modal-content">
                            <div class="apps-modal-body">
                                <img src="logo/dummy-cover1.png" alt="App Preview" class="apps-modal-preview-image" id="appsModalPreviewImage">
                            </div>
                            <div class="apps-modal-footer">
                                <div class="apps-modal-app-info">
                                    <div class="apps-modal-app-icon" id="appsModalAppIcon">ðŸŽ¨</div>
                                    <div class="apps-modal-app-name" id="appsModalAppName">App Name</div>
                                </div>
                                <div class="apps-modal-buttons">
                                    <button class="apps-modal-button open" id="appsModalOpenButton">Open</button>
                                    <button class="apps-modal-button cancel" id="appsModalCancelButton">Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        </div>

        <div class="chatbot-resize-handle" id="chatResizeHandle">
            <button class="reopen-btn reopen-right" id="reopenAgentBtn" title="Open Agent" aria-label="Open Agent" style="display:none">
                <svg viewBox="0 0 20 20" width="12" height="12" aria-hidden="true" focusable="false">
                    <path d="M14 4 L6 10 L14 16" fill="none" stroke="#ccc" stroke-width="2" stroke-linecap="butt" stroke-linejoin="miter"/>
                </svg>
            </button>
        </div>

        <div class="chatbot-container" id="chatbotContainer">
            <iframe 
                id="agentFrame"
                src="agent/agent.html"
                title="Chatbot"
                frameborder="0"
                style="width: 100%; height: 100%; display: block; background: #1a1a1a;">
            </iframe>
        </div>
    </div>

    <!-- ===========================================================================
         10. FOOTER BAR
         =========================================================================== -->
    <footer class="footer-bar">
        <!-- Footer content can be added here -->
    </footer>

    <!-- ===========================================================================
         11. JAVASCRIPT INCLUSION
         =========================================================================== -->
    <script src="script.js"></script>
    <script src="agent/agent-resize.js"></script>
</body>
</html>
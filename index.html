<!DOCTYPE html>
<html lang="en">
<!-- ============================================================================
     OMNIVERSE DEMO APPLICATION - HTML STRUCTURE
     ============================================================================
     This HTML file contains the complete structure for the Omniverse demo app.
     ============================================================================ -->

<head>
    <!-- Document metadata and external resources -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Omniverse Demo</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- ========================================================================
         TOP BLACK BAR (3px height)
         ======================================================================== -->
    <div class="black">
        <!-- Empty div - styling handled in CSS -->
    </div>

    <!-- ========================================================================
         MAIN HEADER BAR (35px height)
         ========================================================================
         Primary header containing logo, app name, user account, and window controls.
         Fixed positioning ensures it stays visible when scrolling.
         Contains three main sections: left (branding), center (user), right (controls)
         ======================================================================== -->
    <header>
        <!-- LEFT SECTION: Logo and Application Name -->
        <div class="header-left">
            <img src="logo/omniverse-logo.png" alt="Omniverse Logo" class="logo">
            <h1 class="brand-text">omniverse</h1>
        </div>
        
        <!-- CENTER SECTION: User Account Management -->
        <div class="user-account">
            <!-- User profile icon -->
            <img src="logo/user-icon1.png" alt="User Icon" class="user-icon">
            
            <!-- Account dropdown container -->
            <div class="account-dropdown">
                <!-- Clickable selector showing current user -->
                <div class="account-selector" onclick="toggleDropdown()">
                    <span class="selected-email">valleyvarun@gmail.com</span>
                    <span class="dropdown-arrow">▼</span>
                </div>
                
                <!-- Hidden dropdown menu (shown/hidden via JavaScript) -->
                <div class="dropdown-menu" id="accountDropdown">
                    <!-- Available user accounts -->
                    <div class="dropdown-item account-item">valleyvarun@gmail.com</div>
                    <div class="dropdown-item account-item">vas2154@columbia.edu</div>
                    <div class="dropdown-item account-item">2020barc020@spab.ac.in</div>
                    
                    <!-- Visual separator -->
                    <div class="dropdown-divider"></div>
                    
                    <!-- Account management actions -->
                    <div class="dropdown-item action-item">Add Account</div>
                    <div class="dropdown-item action-item">Log Out of Account</div>
                </div>
            </div>
        </div>
        
        <!-- RIGHT SECTION: Window Control Buttons -->
        <div class="window-controls">
            <!-- Minimize button -->
            <button class="control-btn minimize-btn" title="Minimize">
                <span>−</span>
            </button>
            
            <!-- Maximize/Restore button -->
            <button class="control-btn maximize-btn" title="Restore Down">
                <span>□</span>
            </button>
            
            <!-- Close button -->
            <button class="control-btn close-btn" title="Close">
                <span>×</span>
            </button>
        </div>
    </header>
    
    <!-- ========================================================================
         NAVIGATION MENU BAR (30px height)
         ========================================================================
         Secondary header with main navigation options.
         Fixed positioning below the main header.
         Contains horizontal menu items for different application sections.
         ======================================================================== -->
    <nav class="menu-bar">
        <ul class="menu-list">
            <li><a href="#" class="menu-item">Home</a></li>
            <li><a href="#" class="menu-item">File</a></li>
            <li><a href="#" class="menu-item">Apps</a></li>
            <li class="menu-item-with-dropdown">
                <a href="#" class="menu-item" onclick="toggleWindowDropdown()">Window</a>
                <div class="window-dropdown" id="windowDropdown">
                    <div class="window-dropdown-item" onclick="showHistory()">Command Line History</div>
                </div>
            </li>
            <li><a href="#" class="menu-item">Settings</a></li>
            <li><a href="#" class="menu-item">Learn</a></li>
            <li><a href="#" class="menu-item">Help</a></li>
        </ul>
    </nav>

    <!-- ========================================================================
         MAIN LAYOUT CONTAINER
         ========================================================================
         Container that holds workspace, resize handle, and chatbot side by side
         ======================================================================== -->
    <div class="main-layout">
        <!-- ====================================================================
             MAIN WORKSPACE CONTAINER
             ====================================================================
             Groups the command history, command line, and main content together
             ==================================================================== -->
        <div class="workspace-container">
        <!-- ====================================================================
             FUNCTION DISPLAY HEADER (40px height)
             ====================================================================
             Shows executed functions as light grey bubbles.
             Fixed positioning below the menu bar.
             Automatically populated when commands are executed via JavaScript.
             Supports horizontal scrolling for multiple function bubbles.
             ==================================================================== -->
        <div class="function-display">
            <button class="history-toggle-btn" id="historyToggleBtn" onclick="toggleHistorySize()" title="Expand/Collapse History">
                <span>▼</span>
            </button>
            <button class="history-collapse-btn" id="historyCollapseBtn" onclick="collapseHistory()" title="Hide History">
                <span>−</span>
            </button>
            <div class="function-bubbles" id="functionBubbles">
                <!-- Function bubbles are dynamically added here by JavaScript -->
                <!-- Example: <div class="function-bubble">someFunction()</div> -->
            </div>
        </div>

        <!-- ====================================================================
             COMMAND LINE INTERFACE (35px height)
             ====================================================================
             Interactive command input area with black background.
             Fixed positioning below the function display.
             Captures global keyboard input for seamless command entry.
             Commands are executed on Enter key press.
             ==================================================================== -->
        <div class="command-line-container">
            <!-- Show history button (appears when history is collapsed) -->
            <button class="show-history-btn" id="showHistoryBtn" onclick="showHistory()" title="Show History" style="display: none;">
                <span>▼</span>
            </button>
            
            <!-- Command label -->
            <span class="command-label">Command:</span>
            
            <!-- Command input field -->
            <input type="text" 
                   class="command-input" 
                   id="commandInput" 
                   placeholder="Type your command..." 
                   autocomplete="off">
        </div>

        <!-- ====================================================================
             MAIN CONTENT AREA
             ====================================================================
             The remaining space below all fixed headers.
             Content will be added here for the main application interface.
             Body has padding-top to account for all fixed elements above.
             ==================================================================== -->
        <main class="main-content">
            <!-- Left Sidebar: Project Manager -->
            <aside class="project-manager-container" aria-label="Project Manager">
                <iframe 
                    id="pmFrame"
                    src="pm/pm.html"
                    title="Project Manager"
                    frameborder="0"
                    style="width: 100%; height: 100%; display: block; background: transparent;"
                ></iframe>
            </aside>

            <!-- Vertical resize handle for Project Manager sidebar -->
            <div class="project-resize-handle" id="projectResizeHandle" role="separator" aria-orientation="vertical" aria-label="Resize Project Manager">
                <button class="reopen-btn reopen-left" id="reopenExplorerBtn" title="Open Explorer" aria-label="Open Explorer" style="display:none">
                    <svg viewBox="0 0 20 20" width="12" height="12" aria-hidden="true" focusable="false">
                        <path d="M6 4 L14 10 L6 16" fill="none" stroke="#ccc" stroke-width="2" stroke-linecap="butt" stroke-linejoin="miter"/>
                    </svg>
                </button>
            </div>

            <!-- Right Content Pane -->
            <section class="content-pane">
                <!-- Iframe for loading external HTML content -->
                <iframe id="contentFrame" 
                        src="pages/home.html" 
                        title="Main Content"
                        frameborder="0"
                        scrolling="no">
                    <!-- Fallback content for browsers that don't support iframe -->
                    <p>Your browser does not support iframes. Please upgrade to a modern browser.</p>
                </iframe>
            </section>
        </main>
        </div>

        <div class="chatbot-resize-handle" id="chatResizeHandle">
            <button class="reopen-btn reopen-right" id="reopenAgentBtn" title="Open Agent" aria-label="Open Agent" style="display:none">
                <svg viewBox="0 0 20 20" width="12" height="12" aria-hidden="true" focusable="false">
                    <path d="M14 4 L6 10 L14 16" fill="none" stroke="#ccc" stroke-width="2" stroke-linecap="butt" stroke-linejoin="miter"/>
                </svg>
            </button>
        </div>

        <div class="chatbot-container" id="chatbotContainer">
            <iframe 
                id="agentFrame"
                src="agent/agent.html"
                title="Chatbot"
                frameborder="0"
                style="width: 100%; height: 100%; display: block; background: #1a1a1a;">
            </iframe>
        </div>
    </div>

    <!-- ========================================================================
         FOOTER BAR (35px height)
         ========================================================================
         Footer bar at the bottom of the page with same styling as main header.
         Fixed positioning ensures it stays at bottom regardless of screen size.
         Same color (#1e1e1e) and height (35px) as the command line interface.
         ======================================================================== -->
    <footer class="footer-bar">
        <!-- Footer content can be added here -->
    </footer>

    <!-- ========================================================================
         JAVASCRIPT INCLUSION
         ========================================================================
         External JavaScript file containing all interactive functionality:
         - User account dropdown behavior
         - Command line input handling
         - Function bubble management
         - Global keyboard event listeners
         ======================================================================== -->
    <script src="script.js"></script>
    <script src="agent/agent-resize.js"></script>
</body>
</html>